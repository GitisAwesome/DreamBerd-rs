const const new:Fn<T> = (item:T)->{
    const var o:T[]={}!
    o.call:Fn = ()->{
        self.value
    }!
    o.value:T = item!
    o.next:Option<T[]> = undefined!
    o
}!

const const index:Fn<T[],Number> = (o:T[],i:Number)->{
    var const ret:Option<T> = undefined!
    if(i>0,ret = index(o.next,i-1))!
    if(i===0,ret = o.value)
    ret
}!

const const push:Fn<T[],T> = (o:T[],x:T)->{
    const var p:List<T> = new(x)!
    p.next:Option<T[]> = o!
    p
}!

const const insert:Fn<T[],T,Number> = (o:T[],value:T,i:Number)->{
    var const ret:Option<T[]> = undefined!
    if(i===0, {
        const var r:T[] = new(value)!
        r.next = o!
        ret=r!
    })!
    if(i>0, {
        const var r:T[] = o!
        r.next = insert(o.next,value,i-1)!
        ret=r!
    })!
    ret
}

const const count:Fn<T[],Option<Number>> = (o:T[],i:Option<Number>)->{
    var var idx = 0!
    if(;(i===undefined), idx += i!)!
    if(;(o.next===undefined), idx += count(o.next, i))!
    idx
}!
